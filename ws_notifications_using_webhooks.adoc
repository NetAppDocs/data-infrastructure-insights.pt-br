---
sidebar: sidebar 
permalink: ws_notifications_using_webhooks.html 
keywords: alert, webhook, notification 
summary: Crie um webhook para notificações de alerta de segurança de carga de trabalho. 
---
= Notificações de segurança de carga de trabalho usando webhooks
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Os webhooks permitem que os usuários enviem notificações de alerta críticas ou de advertência para vários aplicativos usando um canal de webhook personalizado.

Muitos aplicativos comerciais oferecem suporte a webhooks como uma interface de entrada padrão, por exemplo: Slack, PagerDuty, Teams e Discord.  Ao oferecer suporte a um canal webhook genérico e personalizável, o Workload Security pode oferecer suporte a muitos desses canais de entrega.  Informações sobre como configurar os webhooks podem ser encontradas nos sites dos respectivos aplicativos.  Por exemplo, o Slack fornecelink:https://api.slack.com/messaging/webhooks["este guia útil"] .

Você pode criar vários canais de webhook, cada canal direcionado a uma finalidade diferente, aplicativos separados, destinatários diferentes, etc.

A instância do canal webhook é composta pelos seguintes elementos

|===
| Nome | Descrição 


| URL | URL de destino do webhook, incluindo o prefixo http:// ou https:// junto com os parâmetros de URL 


| Método | GET/POST - O padrão é POST 


| Cabeçalho personalizado | Especifique quaisquer cabeçalhos personalizados aqui 


| Corpo da mensagem | Coloque o corpo da sua mensagem aqui 


| Parâmetros de alerta padrão | Lista os parâmetros padrão para o webhook 


| Parâmetros e segredos personalizados | Parâmetros e segredos personalizados permitem que você adicione parâmetros exclusivos e elementos seguros, como senhas 
|===


== Criando um webhook

Para criar um Webhook de segurança de carga de trabalho, vá para Admin > Notificações e selecione a aba “Webhooks de segurança de carga de trabalho”.  A imagem a seguir mostra uma tela de exemplo de criação de webhook do Slack.

Observação: o usuário deve ser um _Administrador_ do Workload Security para criar e gerenciar Webhooks do Workload Security.

image:ws_webhook_slack_example.png["Exemplo de webhook do Slack para Segurança de Carga de Trabalho, largura=500"]

* Insira as informações apropriadas para cada um dos campos e clique em "Salvar".
* Você também pode clicar no botão "Testar Webhook" para testar a conexão.  Observe que isso enviará o "Corpo da Mensagem" (sem substituições) para a URL definida de acordo com o Método selecionado.
* Os webhooks do SWS compreendem uma série de parâmetros padrão.  Além disso, você pode criar seus próprios parâmetros ou segredos personalizados.




== Parâmetros: O que são e como usá-los?

Parâmetros de alerta são valores dinâmicos preenchidos por alerta.  Por exemplo, o parâmetro _%%severity%%_ será substituído pelo tipo de gravidade do alerta.

Observe que as substituições não são realizadas ao clicar no botão "Testar Webhook"; o teste envia uma carga útil que mostra os espaços reservados do parâmetro (_%%<param-name>%%_), mas não os substitui por dados.



=== Parâmetros e segredos personalizados

Nesta seção, você pode adicionar quaisquer parâmetros personalizados e/ou segredos que desejar.  Um parâmetro personalizado ou segredo pode estar no URL ou no corpo da mensagem.  Os segredos permitem que o usuário configure um parâmetro personalizado seguro, como senha, apiKey etc.

A imagem de exemplo a seguir mostra como parâmetros personalizados são usados na criação de webhook.

image:ws_webhook_parameters_example.png["webhook de segurança de carga de trabalho com parâmetros, largura=800"]



== Página da lista de webhooks de segurança de carga de trabalho

Na página da lista Webhooks, são exibidos os campos Nome, Criado por, Criado em, Status, Seguro e Último relatório.  Observação: o valor da coluna 'status' continuará mudando com base no resultado do último gatilho do webhook.  A seguir estão alguns exemplos de resultados de status.

|===


| Status | Descrição 


| OK | Notificação enviada com sucesso. 


| 403 | Proibido. 


| 404 | URL não encontrada. 


| 400  a| 
Pedido ruim.  Você poderá ver esse status se houver algum erro no corpo da mensagem, por exemplo:

* JSON mal formatado.
* Fornecendo valor inválido para chaves reservadas.  Por exemplo, o PagerDuty aceita apenas crítico/aviso/erro/informação para “Gravidade”.  Qualquer outro resultado pode render um status 400.
* Erros de validação específicos do aplicativo.  Por exemplo, o Slack permite no máximo 10 campos dentro de uma seção.  Incluir mais de 10 pode resultar em um status 400.




| 410 | O recurso não está mais disponível 
|===
A coluna “Último relatório” indica o horário em que o webhook foi acionado pela última vez.

Na página de listagem de webhooks, os usuários também podem editar/duplicar/excluir webhooks.



== Configurar notificação de Webhook na política de alerta

Para adicionar uma notificação de webhook a uma política de alerta, acesse -Segurança de carga de trabalho > Políticas- e selecione uma política existente ou adicione uma nova política.  Na seção _Ações_ > menu suspenso _Notificações de webhook_, selecione os webhooks necessários.

image:ws_edit_attack_policy.png["Caixa de diálogo Editar política de ataque mostrando o menu suspenso do webhook, largura=500"]

As notificações do webhook estão vinculadas às políticas.  Quando o ataque (RW/DD/WARN) acontecer, a ação configurada (Tirar snapshot/bloqueio de usuário) será tomada e então a notificação de webhook associada será acionada.

Observação: as notificações por e-mail são independentes de políticas e serão acionadas normalmente.

* Se uma política for pausada, as notificações do webhook não serão acionadas.
* Vários webhooks podem ser anexados a uma única política, mas é recomendável anexar no máximo 5 webhooks a uma política.




=== Exemplos de webhook de segurança de carga de trabalho

Webhooks paralink:ws_webhook_example_slack.html["Folga"]

Webhooks paralink:ws_webhook_example_pagerduty.html["PagerDuty"] Webhooks paralink:ws_webhook_example_teams.html["Equipes"] Webhooks paralink:ws_webhook_example_discord.html["Discórdia"]
