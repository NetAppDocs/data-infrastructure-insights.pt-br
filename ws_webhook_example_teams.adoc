---
sidebar: sidebar 
permalink: ws_webhook_example_teams.html 
keywords: webhook, notification, Microsoft, Teams, integration 
summary: Crie um webhook de segurança de carga de trabalho para o Microsoft Teams para alertar sobre segurança 
---
= Exemplo de webhook de segurança de carga de trabalho para Microsoft Teams
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Os webhooks permitem que os usuários enviem notificações de alerta para vários aplicativos usando um canal de webhook personalizado.  Esta página fornece um exemplo de configuração de webhooks para o Teams.


NOTE: Esta página se refere a instruções de terceiros, que estão sujeitas a alterações.  Consulte olink:https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook["Documentação das equipes"] para obter as informações mais atualizadas.



== Configuração das equipes:

. No Teams, selecione o kebab e pesquise por Webhook de entrada.
+
image:Webhooks_Teams_Create_Webhook.png["Webhook de entrada no Teams"]

. Selecione *Adicionar a uma equipe > Selecionar uma equipe > Configurar um conector*.
. Copie o URL do Webhook.  Você precisará colar isso na configuração do webhook do Workload Security.




== Criar Webhook de Equipes de Segurança de Carga de Trabalho:

. Navegue até Admin > Notificações e selecione a aba _“Workload Security Webhooks_.  Selecione _+ Webhook_ para criar um novo webhook.
. Dê ao webhook um nome significativo.
. No menu suspenso _Tipo de modelo_, selecione *Equipes*.
+
image:ws_webhook_teams_example.png["Exemplo de webhook de equipes de segurança de carga de trabalho"]

. Cole a URL acima no campo _URL_.




=== Passos para criar uma notificação do Teams com o modelo de Adaptive Card

. Substitua o corpo da mensagem pelo seguinte modelo:
+
....
  {
  "type": "message",
  "attachments": [
    {
      "contentType": "application/vnd.microsoft.card.adaptive",
      "content": {
        "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
        "type": "AdaptiveCard",
        "version": "1.2",
        "body": [
          {
            "type": "TextBlock",
            "text": "%%severity%% Alert: %%synopsis%%",
            "wrap": true,
            "weight": "Bolder",
            "size": "Large"
          },
          {
            "type": "TextBlock",
            "text": "%%detected%%",
            "wrap": true,
            "isSubtle": true,
            "spacing": "Small"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "User",
                "value": "%%userName%%"
              },
              {
                "title": "Attack/Abnormal Behavior",
                "value": "%%type%%"
              },
              {
                "title": "Action taken",
                "value": "%%actionTaken%%"
              },
              {
                "title": "Files encrypted",
                "value": "%%filesEncrypted%%"
              },
              {
                "title": "Encrypted files suffix",
                "value": "%%encryptedFilesSuffix%%"
              },
              {
                "title": "Files deleted",
                "value": "%%filesDeleted%%"
              },
              {
                "title": "Activity Change Rate",
                "value": "%%changePercentage%%"
              },
              {
                "title": "Severity",
                "value": "%%severity%%"
              },
              {
                "title": "Status",
                "value": "%%status%%"
              },
              {
                "title": "Notes",
                "value": "%%note%%"
              }
            ]
          }
        ],
        "actions": [
          {
            "type": "Action.OpenUrl",
            "title": "View Details",
            "url": "https://%%cloudInsightsHostname%%/%%alertDetailsPageUrl%%"
          }
        ]
      }
    }
  ]
}
....
. Se você estiver usando Power Automate Flows, os parâmetros de consulta na URL estarão em formato codificado. Você deve decodificar a URL antes de inserir.
. Clique em "Test Webhook" para garantir que não haja erros.
. Salve o webhook.




== Notificações via Webhook

Para notificar eventos via webhook, navegue até _Segurança de carga de trabalho > Políticas_.  Selecione _+Política de Ataque_ ou _+Política de Aviso_.

* Insira um nome de política significativo.
* Selecione os tipos de ataque necessários, os dispositivos aos quais a política deve ser anexada e as ações necessárias.
* No menu suspenso _Notificações de Webhooks_, selecione os webhooks do Teams necessários. Salve a política.


Observação: os webhooks também podem ser anexados às políticas existentes editando-as.

image:ws_add_attack_policy.png["Adicionar caixa de diálogo de política de ataque mostrando webhook"]
