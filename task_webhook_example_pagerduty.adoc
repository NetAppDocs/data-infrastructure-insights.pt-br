---
sidebar: sidebar 
permalink: task_webhook_example_pagerduty.html 
keywords: webhook, notification, PagerDuty, integration 
summary: Crie um webhook para alertar sobre limites de desempenho ou inventário para Pagerduty 
---
= Exemplo de webhook para PagerDuty
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Os webhooks permitem que os usuários enviem notificações de alerta para vários aplicativos usando um canal de webhook personalizado.  Esta página fornece um exemplo de configuração de webhooks para o PagerDuty.


NOTE: Esta página se refere a instruções de terceiros, que podem estar sujeitas a alterações.  Consulte olink:https://support.pagerduty.com/docs/services-and-integrations["Documentação do PagerDuty"] para obter as informações mais atualizadas.



== Configuração do PagerDuty:

. No PagerDuty, navegue até *Serviços > Diretório de serviços* e clique no botão *+Novo serviço*
. Digite um _Nome_ e selecione _Usar nossa API diretamente_.  Clique em _Adicionar serviço_.
+
image:Webhooks_PagerDutyScreen1.png["Tela do Pagerduty"]

. Clique na aba _Integrações_ para ver a *Chave de Integração*.  Você precisará dessa chave ao criar o webhook do Data Infrastructure Insights abaixo.


. Acesse *Incidentes* ou *Serviços* para visualizar Alertas.
+
image:Webhooks_PagerDutyScreen2.png["Tela do Pagerduty"]





== Criar webhook de Data Infrastructure Insights :

. No Data Infrastructure Insights, navegue até *Admin > Notificações* e selecione a guia *Webhooks*.  Clique em *+Webhook* para criar um novo webhook.
. Dê ao webhook um nome significativo, como "PagerDuty Trigger".  Você usará este webhook para eventos de nível crítico e de aviso.
. No menu suspenso _Tipo de modelo_, selecione *PagerDuty*.


. Crie um segredo de parâmetro personalizado chamado _routingKey_ e defina o valor como o valor da _Chave de Integração_ do PagerDuty acima.
+
image:Webhooks_Custom_Secret_Routing_Key.png["Configurando a chave de roteamento"]



Repita essas etapas para criar um webhook "PagerDuty Resolve" para eventos resolvidos.



== Mapeamento de campos de Data Infrastructure Insights do PagerDuty

A tabela e a imagem a seguir mostram o mapeamento de campos entre o PagerDuty e o Data Infrastructure Insights:

[cols="<,<"]
|===
| PagerDuty | Data Infrastructure Insights 


| Chave de alerta | ID de alerta 


| Fonte | Acionado em 


| Componente | Nome da métrica 


| Grupo | Tipo de objeto 


| Aula | Nome do monitor 
|===
image:Webhooks-PagerDuty_Fields.png["Campos do PagerDuty em CI"]



== Notificações via Webhook

Para notificar eventos via webhook, no Data Infrastructure Insights navegue até *Alertas > Monitores* e clique em *+Monitor* para criar um novolink:task_create_monitor.html["monitor"] .

* Selecione uma métrica e defina as condições do monitor.
* Em _Configurar notificação(ões) da equipe, escolha o Método de entrega *Webhook*.
* Escolha o webhook "PagerDuty Trigger" para eventos de nível Crítico e de Aviso.
* Selecione "PagerDuty Resolve" para eventos resolvidos.
+
image:Webhooks_Notifications.png["Notificações de webhook"]




NOTE: Definir notificações separadas para eventos de gatilho e eventos resolvidos é uma prática recomendada, pois o PagerDuty lida com eventos de gatilho de forma diferente dos eventos resolvidos.
