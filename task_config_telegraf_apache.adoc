---
sidebar: sidebar 
permalink: task_config_telegraf_apache.html 
keywords: telegraf, installation, install, apache 
summary: Configuração do coletor de dados Apache 
---
= Apache Data Collector
:toc: macro
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/
:toc-position: content


[role="lead"]
Este coletor de dados permite a coleta de dados de servidores Apache em seu ambiente.

.Pré-requisitos
* Você deve ter seu servidor HTTP Apache configurado e funcionando corretamente
* Você deve ter permissões de sudo ou administrador no host/VM do agente
* Normalmente, o módulo Apache _mod_status_ está configurado para expor uma página na localização '/Server-status?auto' do servidor Apache. A opção _ExtendedStatus_ deve estar ativada para coletar todos os campos disponíveis. Para obter informações sobre como configurar seu servidor, consulte a documentação do módulo Apache: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[]




== Instalação

. A partir de *Observability > Collectors*, clique em * Data Collector*. Escolha Apache.
+
Selecione o sistema operacional ou a plataforma na qual o agente Telegraf está instalado.

. Se você ainda não instalou um Agente para coleção ou deseja instalar um Agente para um sistema operacional ou plataforma diferente, clique em _Mostrar instruções_ para expandir as link:task_config_telegraf_agent.html["Instalação do agente"] instruções.
. Selecione a chave de acesso do agente para uso com este coletor de dados. Você pode adicionar uma nova chave de acesso ao agente clicando no botão * chave de acesso ao agente*. Prática recomendada: Use uma chave de acesso de agente diferente somente quando você quiser agrupar coletores de dados, por exemplo, por SO/Plataforma.
. Siga as etapas de configuração para configurar o coletor de dados. As instruções variam dependendo do tipo de sistema operacional ou Plataforma que você está usando para coletar dados.


image:ApacheDCConfigLinux.png["Configuração do Apache"]



== Configuração

O plugin do Telegraf para o servidor HTTP do Apache depende do módulo 'od_status' para ser ativado. Quando isso estiver ativado, o servidor HTTP do Apache irá expor um endpoint HTML que pode ser visualizado no seu navegador ou raspado para extração do status de todas as configurações do servidor HTTP do Apache.



=== Compatibilidade:

A configuração foi desenvolvida em relação ao servidor HTTP do Apache versão 2,4.38.



=== Ativar mod_status:

Ativar e expor os módulos 'od_status' envolve duas etapas:

* Módulo de ativação
* Expondo estatísticas do módulo




=== Módulo de ativação:

O carregamento de módulos é controlado pelo arquivo de configuração em '/usr/local/apache/conf/httpd.conf'. Edite o arquivo de configuração e descomente as seguintes linhas:

 LoadModule status_module modules/mod_status.so
 Include conf/extra/httpd-info.conf


=== Expondo estatísticas do módulo:

A exposição do 'mod_status' é controlada pelo arquivo de configuração sob '/usr/local/apache2/conf/extra/httpd-info.conf'. Certifique-se de que você tem o seguinte arquivo de configuração (pelo menos, outras diretivas estarão lá):

[listing]
----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----
Para obter instruções detalhadas sobre o módulo 'od_status', consulte link:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable["Documentação do Apache"]



== Objetos e contadores

Os seguintes objetos e seus contadores são coletados:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objeto: | Identificadores: | Atributos: | Pontos de dados: 


| Apache | Servidor de namespace | O tempo de atividade do servidor principal da geração do servidor principal do servidor de geração MPM do nó IP está a parar | Workers ocupados bytes por solicitação bytes por segundo CPU Crianças sistema CPU Crianças Usuário CPU carga CPU sistema CPU usuários conexões assíncronas fechando conexões assíncronas manter Alive conexões assíncronas escrevendo conexões duração total por solicitação trabalhadores ociosos carga média (últimos 1m) carga média (últimos 15m) carga média (últimos 5m) processos solicitações por segundo Total 
|===


== Solução de problemas

Informações adicionais podem ser encontradas na link:concept_requesting_support.html["Suporte"]página.
