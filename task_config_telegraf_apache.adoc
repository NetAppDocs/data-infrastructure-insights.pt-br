---
sidebar: sidebar 
permalink: task_config_telegraf_apache.html 
keywords: telegraf, installation, install, apache 
summary: Configuração do coletor de dados do Apache 
---
= Coletor de Dados Apache
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Este coletor de dados permite a coleta de dados de servidores Apache em seu locatário.

.Pré-requisitos
* Você deve ter seu servidor Apache HTTP configurado e funcionando corretamente
* Você deve ter permissões de sudo ou administrador no host/VM do seu agente
* Normalmente, o módulo _mod_status_ do Apache é configurado para expor uma página no local '/server-status?auto' do servidor Apache.  A opção _ExtendedStatus_ deve ser habilitada para coletar todos os campos disponíveis.  Para obter informações sobre como configurar seu servidor, consulte a documentação do módulo Apache: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[]




== Instalação

. Em *Observabilidade > Coletores*, clique em *+Coletor de Dados*.  Escolha Apache.
+
Selecione o sistema operacional ou plataforma na qual o agente Telegraf está instalado.

. Se você ainda não instalou um Agente para coleta ou deseja instalar um Agente para um Sistema Operacional ou Plataforma diferente, clique em _Mostrar Instruções_ para expandir olink:task_config_telegraf_agent.html["Instalação do agente"] instruções.
. Selecione a Chave de Acesso do Agente para uso com este coletor de dados.  Você pode adicionar uma nova Chave de Acesso do Agente clicando no botão *+ Chave de Acesso do Agente*.  Prática recomendada: use uma chave de acesso de agente diferente somente quando quiser agrupar coletores de dados, por exemplo, por sistema operacional/plataforma.
. Siga as etapas de configuração para configurar o coletor de dados.  As instruções variam dependendo do tipo de sistema operacional ou plataforma que você está usando para coletar dados.


image:ApacheDCConfigLinux.png["Configuração do Apache"]



== Configurar

O plugin do Telegraf para o servidor HTTP do Apache depende do módulo 'mod_status' para ser habilitado.  Quando isso estiver habilitado, o servidor HTTP do Apache exporá um ponto de extremidade HTML que pode ser visualizado no seu navegador ou extraído para extração do status de todas as configurações do servidor HTTP do Apache.



=== Compatibilidade:

A configuração foi desenvolvida no servidor HTTP versão 2.4.38 do Apache.



=== Habilitando mod_status:

Habilitar e expor os módulos 'mod_status' envolve duas etapas:

* Módulo de habilitação
* Expondo estatísticas do módulo




=== Módulo de habilitação:

O carregamento de módulos é controlado pelo arquivo de configuração em '/usr/local/apache/conf/httpd.conf'.  Edite o arquivo de configuração e descomente as seguintes linhas:

 LoadModule status_module modules/mod_status.so
 Include conf/extra/httpd-info.conf


=== Expondo estatísticas do módulo:

A exposição de 'mod_status' é controlada pelo arquivo de configuração em '/usr/local/apache2/conf/extra/httpd-info.conf'.  Certifique-se de ter o seguinte no arquivo de configuração (pelo menos, outras diretivas estarão lá):

[listing]
----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----
Para obter instruções detalhadas sobre o módulo 'mod_status', consulte olink:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable["Documentação do Apache"]



== Objetos e Contadores

Os seguintes objetos e seus contadores são coletados:

[cols="<.<,<.<,<.<,<.<"]
|===
| Objeto: | Identificadores: | Atributos: | Pontos de dados: 


| Apache | Servidor de namespace | IP do nó Nome do nó Porta Configuração do servidor pai Geração Servidor pai Geração de MPM O tempo de atividade do servidor está parando | Trabalhadores Ocupados Bytes por Solicitação Bytes por Segundo Filhos da CPU Sistema Filhos da CPU Usuário Carga da CPU CPU Sistema Usuário Conexões Assíncronas Fechando Conexões Assíncronas Manter Ativo Conexões Assíncronas Escrevendo Conexões Duração Total por Solicitação Trabalhadores Ociosos Carga Média (últimos 1m) Carga Média (últimos 15m) Carga Média (últimos 5m) Processos Solicitações por Segundo Total de Acessos Duração Total Total de KBytes Placar Fechando Placar Pesquisas DNS Placar Finalizando Placar Limpeza Ociosa Placar Manter Ativo Placar Registro Placar Abrir Placar Lendo Placar Enviando Placar Iniciando Placar Aguardando 
|===


== Solução de problemas

Informações adicionais podem ser encontradas emlink:concept_requesting_support.html["Apoiar"] página.
