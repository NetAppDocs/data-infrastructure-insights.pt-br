---
sidebar: sidebar 
permalink: task_create_monitor.html 
keywords: monitors, alerts, log, metric, system-defined, system, metric, 
summary: Crie métricas personalizadas e monitores de log para rastrear proativamente o desempenho da infraestrutura, limites de capacidade e eventos críticos com alertas e notificações automatizados. 
---
= Alerta com monitores
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Configure monitores para rastrear limites de desempenho, registrar eventos e anomalias em seus recursos de infraestrutura. Crie alertas personalizados para métricas como latência de gravação de nó, capacidade de armazenamento ou desempenho do aplicativo e receba notificações quando essas condições forem atendidas.

Os monitores permitem que você defina limites para métricas geradas por objetos de "infraestrutura", como armazenamento, VM, EC2 e portas, bem como para dados de "integração", como aqueles coletados para Kubernetes, métricas avançadas do ONTAP e plug-ins do Telegraf.  Esses monitores _métricos_ alertam você quando limites de nível de alerta ou nível crítico são ultrapassados.

Você também pode criar monitores para disparar alertas de nível de aviso, crítico ou informativo quando _eventos de log_ especificados forem detectados.

O Data Infrastructure Insights fornece uma série delink:task_system_monitors.html["Monitores definidos pelo sistema"] também, com base no seu ambiente.



== Melhores práticas de segurança

Os alertas do Data Infrastructure Insights são projetados para destacar pontos de dados e tendências sobre seu locatário, e o Data Infrastructure Insights permite que você insira qualquer endereço de e-mail válido como destinatário do alerta.  Se você estiver trabalhando em um ambiente seguro, fique especialmente atento a quem está recebendo a notificação ou tem acesso ao alerta.



== Monitor métrico ou de log?

. No menu Data Infrastructure Insights , clique em *Alertas > Gerenciar Monitores*
+
A página Lista de monitores é exibida, mostrando os monitores configurados no momento.

. Para modificar um monitor existente, clique no nome do monitor na lista.
. Para adicionar um monitor, clique em *+ Monitor*.
+
image:Monitor_log_or_metric.png["Escolha o sistema ou o monitor de log"]

+
Ao adicionar um novo monitor, você será solicitado a criar um Monitor de Métricas ou um Monitor de Logs.

+
** Monitores _Metric_ alertam sobre gatilhos relacionados à infraestrutura ou ao desempenho
** _Log_ monitora alertas sobre atividades relacionadas a logs


+
Depois de escolher o tipo de monitor, a caixa de diálogo Configuração do monitor será exibida.  A configuração varia dependendo do tipo de monitor que você está criando.





=== Monitor Métrico

. No menu suspenso, pesquise e escolha um tipo de objeto e uma métrica para monitorar.


Você pode definir filtros para restringir quais atributos ou métricas de objeto monitorar.

image:MonitorMetricFilter.png["Filtragem de métricas"]

Ao trabalhar com dados de integração (Kubernetes, ONTAP Advanced Data, etc.), a filtragem de métricas remove os pontos de dados individuais/incomparáveis ​​da série de dados plotados, diferentemente dos dados de infraestrutura (armazenamento, VM, portas, etc.), onde os filtros trabalham no valor agregado da série de dados e potencialmente removem o objeto inteiro do gráfico.

Os monitores de métricas se aplicam a objetos de inventário, como armazenamento, switch, host, VM, etc., bem como a métricas de integração, como dados do ONTAP Advanced ou do Kubernetes. Ao monitorar objetos de inventário, observe que você não pode selecionar um método "Agrupar por". Entretanto, o agrupamento _é_ permitido ao monitorar dados de integração.



==== Monitores multicondições

Você pode optar por refinar ainda mais seu monitor métrico adicionando uma segunda condição. Basta expandir o prompt "+Adicionar condição métrica secundária" e configurar a condição adicional.

image:multi-condition_monitor_second_condition.png["defina a segunda condição"]

O monitor emitirá um alerta se ambas as condições forem atendidas.

Observe que você só pode usar "E" uma segunda condição; você não pode escolher alertar sobre uma condição OU sobre a outra.



==== Defina as condições do monitor.

. Depois de escolher o objeto e a métrica a serem monitorados, defina os limites de nível de aviso e/ou nível crítico.
. Para o nível _Warning_, insira 200 para nosso exemplo.  A linha tracejada que indica este nível de alerta é exibida no gráfico de exemplo.
. Para o nível _Crítico_, insira 400.  A linha tracejada que indica esse nível crítico é exibida no gráfico de exemplo.
+
O gráfico exibe dados históricos.  As linhas de nível de Aviso e Crítico no gráfico são uma representação visual do Monitor, para que você possa ver facilmente quando o Monitor pode disparar um alerta em cada caso.

. Para o intervalo de ocorrência, escolha _Continuamente_ por um período de _15 minutos_.
+
Você pode optar por disparar um alerta no momento em que um limite for violado ou esperar até que o limite esteja em violação contínua por um período de tempo.  Em nosso exemplo, não queremos ser alertados sempre que o IOPS total atingir o pico acima do nível de Aviso ou Crítico, mas apenas quando um objeto monitorado exceder continuamente um desses níveis por pelo menos 15 minutos.

+
image:Monitor_metric_conditions.png["Defina as condições do monitor"]





==== Definir o comportamento de resolução de alerta

Você pode escolher como um alerta do monitor métrico é resolvido.  Duas opções são apresentadas a você:

* Resolva quando a métrica retornar ao intervalo aceitável.
* Resolva quando a métrica estiver dentro do intervalo aceitável por um período de tempo especificado, de 1 minuto a 7 dias.




=== Monitor de Log

Ao criar um *Monitor de log*, primeiro escolha qual log monitorar na lista de logs disponível.  Você pode então filtrar com base nos atributos disponíveis, conforme acima.  Você também pode escolher um ou mais atributos "Agrupar por".


NOTE: O filtro do Log Monitor não pode estar vazio.

image:Monitor_Group_By_Example.png["Escolha o log a ser monitorado, defina um filtro e selecione o grupo por método, se desejar"]



==== Defina o comportamento do alerta

Você pode criar o monitor para alertar com um nível de gravidade _Crítico_, _Aviso_ ou _Informativo_ quando as condições definidas acima ocorrerem uma vez (ou seja, imediatamente) ou esperar para alertar até que as condições ocorram 2 vezes ou mais.



==== Definir o comportamento de resolução de alerta

Você pode escolher como um alerta do monitor de log é resolvido.  São apresentadas três opções:

* *Resolver instantaneamente*: O alerta é resolvido imediatamente, sem necessidade de nenhuma outra ação
* *Resolver com base no tempo*: O alerta é resolvido após o tempo especificado ter passado
* *Resolver com base na entrada de log*: O alerta é resolvido quando uma atividade de log subsequente ocorre.  Por exemplo, quando um objeto é registrado como "disponível".


image:Monitor_log_monitor_resolution.png["Resolução de Alerta"]



=== Monitor de Detecção de Anomalias

. No menu suspenso, pesquise e escolha um tipo de objeto e uma métrica para monitorar.


Você pode definir filtros para restringir quais atributos ou métricas de objeto monitorar.

image:AnomalyDetectionMonitorMetricChoosing.png["Filtragem de métricas para detecção de anomalias"]



==== Defina as condições do monitor.

. Depois de escolher o objeto e a métrica a serem monitorados, você define as condições sob as quais uma anomalia é detectada.
+
** Escolha se deseja detectar uma anomalia quando a métrica escolhida *atingir o pico acima* dos limites previstos, *cair abaixo* desses limites ou *atingir o pico acima ou abaixo* dos limites.
** Defina a *sensibilidade* da detecção.  *Baixo* (menos anomalias são detectadas), *Médio* ou *Alto* (mais anomalias são detectadas).
** Defina os alertas como *Aviso* ou *Crítico*.
** Se desejar, você pode optar por reduzir o ruído, ignorando anomalias quando a métrica escolhida estiver abaixo de um limite definido por você.




image:AnomalyDetectionMonitorDefineConditions.png["Definir as condições para desencadear uma detecção de anomalia"]



=== Selecione o tipo de notificação e os destinatários

Na seção _Configurar notificação(ões) da equipe_, você pode escolher se deseja alertar sua equipe por e-mail ou Webhook.

image:Webhook_Choose_Monitor_Notification.png["Escolha o método de alerta"]

*Alerta via e-mail:*

Especifique os destinatários de e-mail para notificações de alerta.  Se desejar, você pode escolher diferentes destinatários para alertas de aviso ou críticos.

image:email_monitor_alerts.png["Destinatários de alertas por e-mail"]

*Alerta via Webhook:*

Especifique o(s) webhook(s) para notificações de alerta.  Se desejar, você pode escolher diferentes webhooks para alertas de aviso ou críticos.

image:Webhook_Monitor_Notifications.png["Alerta de webhook"]


NOTE: As notificações do ONTAP Data Collector têm precedência sobre quaisquer notificações específicas do Monitor que sejam relevantes para o cluster/coletor de dados.  A lista de destinatários que você definiu para o próprio Coletor de Dados receberá os alertas do coletor de dados.  Se não houver alertas ativos do coletor de dados, os alertas gerados pelo monitor serão enviados para destinatários específicos do monitor.



=== Definindo ações corretivas ou informações adicionais

Você pode adicionar uma descrição opcional, bem como insights adicionais e/ou ações corretivas preenchendo a seção *Adicionar uma descrição de alerta*.  A descrição pode ter até 1024 caracteres e será enviada com o alerta.  O campo de insights/ação corretiva pode ter até 67.000 caracteres e será exibido na seção de resumo da página inicial do alerta.

Nesses campos, você pode fornecer notas, links ou etapas a serem seguidas para corrigir ou abordar o alerta.

Você pode adicionar qualquer atributo de objeto (por exemplo, nome de armazenamento) como um parâmetro para uma descrição de alerta.  Por exemplo, você pode definir parâmetros para o nome do volume e o nome do armazenamento em uma descrição como: "Alta latência para volume: _%%relatedObject.volume.name%%_, Armazenamento: _%%relatedObject.storage.name%%_".

image:Monitors_Alert_Description.png["Ações corretivas de alerta e descrição"]



=== Salve seu monitor

. Se desejar, você pode adicionar uma descrição do monitor.
. Dê ao Monitor um nome significativo e clique em *Salvar*.
+
Seu novo monitor será adicionado à lista de monitores ativos.





== Lista de Monitores

A página Monitor lista os monitores configurados atualmente, mostrando o seguinte:

* Nome do monitor
* Status
* Objeto/métrica sendo monitorado
* Condições do Monitor


Você pode optar por pausar temporariamente o monitoramento de um tipo de objeto clicando no menu à direita do monitor e selecionando *Pausar*.  Quando estiver pronto para retomar o monitoramento, clique em *Retomar*.

Você pode copiar um monitor selecionando *Duplicar* no menu.  Você pode então modificar o novo monitor e alterar o objeto/métrica, filtro, condições, destinatários de e-mail, etc.

Se um monitor não for mais necessário, você pode excluí-lo selecionando *Excluir* no menu.



== Grupos de Monitoramento

O agrupamento permite que você visualize e gerencie monitores relacionados.  Por exemplo, você pode ter um grupo de monitores dedicado ao armazenamento em seu locatário ou monitores relevantes para uma determinada lista de destinatários.

image:Monitors_GroupList.png["Agrupamento de monitores"]

Os seguintes grupos de monitores são mostrados.  O número de monitores contidos em um grupo é mostrado ao lado do nome do grupo.

* *Todos os monitores* lista todos os monitores.
* *Monitores personalizados* lista todos os monitores criados pelo usuário.
* *Monitores suspensos* listará todos os monitores do sistema que foram suspensos pelo Data Infrastructure Insights.
* O Data Infrastructure Insights também mostrará uma série de *Grupos de Monitores de Sistema*, que listarão um ou mais grupos delink:task_system_monitors.html["monitores definidos pelo sistema"] , incluindo monitores de infraestrutura e carga de trabalho do ONTAP .



NOTE: Monitores personalizados podem ser pausados, retomados, excluídos ou movidos para outro grupo.  Os monitores definidos pelo sistema podem ser pausados e retomados, mas não podem ser excluídos ou movidos.



=== Monitores Suspensos

Este grupo só será exibido se o Data Infrastructure Insights tiver suspendido um ou mais monitores.  Um monitor pode ser suspenso se estiver gerando alertas excessivos ou contínuos.  Se o monitor for personalizado, modifique as condições para evitar o alerta contínuo e, em seguida, retome o monitoramento.  O monitor será removido do grupo Monitores Suspensos quando o problema que causou a suspensão for resolvido.



=== Monitores definidos pelo sistema

Esses grupos mostrarão monitores fornecidos pelo Data Infrastructure Insights, desde que seu ambiente contenha os dispositivos e/ou disponibilidade de log exigidos pelos monitores.

Monitores definidos pelo sistema não podem ser modificados, movidos para outro grupo ou excluídos.  No entanto, você pode duplicar um monitor do sistema e modificar ou mover a duplicata.

Os monitores do sistema podem incluir monitores para infraestrutura ONTAP (armazenamento, volume, etc.) ou cargas de trabalho (ou seja, monitores de log) ou outros grupos.  A NetApp avalia constantemente as necessidades dos clientes e a funcionalidade do produto e atualizará ou adicionará monitores e grupos do sistema conforme necessário.



=== Grupos de monitores personalizados

Você pode criar seus próprios grupos para conter monitores com base em suas necessidades.  Por exemplo, você pode querer um grupo para todos os seus monitores relacionados ao armazenamento.

Para criar um novo grupo de monitores personalizado, clique no botão *"+" Criar novo grupo de monitores*.  Digite um nome para o grupo e clique em *Criar Grupo*.  Um grupo vazio é criado com esse nome.

Para adicionar monitores ao grupo, vá para o grupo _Todos os Monitores_ (recomendado) e faça um dos seguintes:

* Para adicionar um único monitor, clique no menu à direita do monitor e selecione _Adicionar ao grupo_.  Escolha o grupo ao qual deseja adicionar o monitor.
* Clique no nome do monitor para abrir a visualização de edição do monitor e selecione um grupo na seção _Associar a um grupo de monitores_.
+
image:Monitors_AssociateToGroup.png["Associar ao grupo"]



Remova monitores clicando em um grupo e selecionando _Remover do Grupo_ no menu.  Não é possível remover monitores do grupo _Todos os monitores_ ou _Monitores personalizados_.  Para excluir um monitor desses grupos, você deve excluir o próprio monitor.


NOTE: Remover um monitor de um grupo não exclui o monitor do Data Infrastructure Insights.  Para remover completamente um monitor, selecione-o e clique em _Excluir_.  Isso também o remove do grupo ao qual pertencia e ele não fica mais disponível para nenhum usuário.

Você também pode mover um monitor para um grupo diferente da mesma maneira, selecionando _Mover para Grupo_.

Para pausar ou retomar todos os monitores de um grupo de uma só vez, selecione o menu do grupo e clique em _Pausar_ ou _Retomar_.

Use o mesmo menu para renomear ou excluir um grupo.  A exclusão de um grupo não exclui os monitores do Data Infrastructure Insights; eles ainda estão disponíveis em _Todos os monitores_.

image:Monitors_PauseGroup.png["Pausar um grupo"]



== Monitores definidos pelo sistema

O Data Infrastructure Insights inclui vários monitores definidos pelo sistema para métricas e logs.  Os monitores do sistema disponíveis dependem dos coletores de dados presentes no seu locatário.  Por isso, os monitores disponíveis no Data Infrastructure Insights podem mudar conforme coletores de dados são adicionados ou suas configurações são alteradas.

Veja olink:task_system_monitors.html["Monitores definidos pelo sistema"] página para descrições dos monitores incluídos no Data Infrastructure Insights.



=== Mais informações

* link:task_view_and_manage_alerts.html["Visualizando e descartando alertas"]

