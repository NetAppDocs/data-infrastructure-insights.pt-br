---
sidebar: sidebar 
permalink: concept_log_explorer.html 
keywords: logs, monitors, alerts, EMS, 
summary: O Log Explorer é uma ferramenta poderosa para investigar problemas por meio de diferentes logs do sistema. 
---
= Explorador de Logs
:hardbreaks:
:allow-uri-read: 


[role="lead"]
O Data Infrastructure Insights Log Explorer é uma ferramenta poderosa para consultar logs do sistema.  Além de ajudar nas investigações, você também pode salvar uma consulta de log em um Monitor para fornecer alertas quando esses gatilhos de log específicos forem ativados.

Para começar a explorar os logs, clique em *Consultas de Log > +Nova Consulta de Log*.

Selecione um log disponível na lista.

image:LogExplorer_2022.png["Escolha seu log"]


NOTE: Os tipos de logs disponíveis para consulta podem variar dependendo do seu ambiente.  Tipos de log adicionais podem ser adicionados ao longo do tempo.

Você pode definir filtros para refinar ainda mais os resultados da consulta.  Por exemplo, para encontrar todas as mensagens de log que mostram uma falha, defina um filtro para _Mensagens_ contendo a palavra "falhou".


TIP: Você pode começar a digitar o texto desejado no campo de filtro; o Data Infrastructure Insights solicitará que você crie uma pesquisa curinga contendo a sequência de caracteres conforme você digita.

Os resultados são exibidos em um gráfico mostrando o número de instâncias de log em cada período de tempo mostrado.  Abaixo do gráfico estão as próprias entradas de log.  O gráfico e as entradas são atualizados automaticamente com base no intervalo de tempo selecionado.

image:LogExplorer_QueryForFailed.png["Exemplo de consulta mostrando filtro"]



== Filtragem



=== Incluir / Excluir

Ao filtrar os logs, você pode escolher *incluir* (ou seja, "Filtrar para") ou *excluir* as strings digitadas.  As sequências de caracteres excluídas são exibidas no filtro concluído como "NÃO <string>".

image:Log_Advanced_Query_Filter_Exclude.png["Filtro de log mostrando a opção Excluir"]

Filtros baseados em curingas ou expressões (por exemplo, NÃO, OU, "Nenhum", etc.) são exibidos em azul escuro no campo de filtro.  Os itens selecionados diretamente da lista são exibidos em azul claro.


NOTE: A qualquer momento, você pode clicar em _Criar um Monitor de Log_ para criar um novo Monitor com base no filtro atual.



=== Filtragem Avançada

Ao filtrar por texto ou valores de lista em consultas ou widgets do painel, ao começar a digitar, você verá a opção de criar um *filtro curinga* com base no texto atual.  Selecionar esta opção retornará todos os resultados que correspondem à expressão curinga.  Você também pode criar expressões usando NOT, AND ou OR, ou pode selecionar a opção "Nenhum" para filtrar valores nulos.


NOTE: Não se esqueça de salvar sua consulta com antecedência e com frequência ao criar sua filtragem.  A Consulta Avançada é uma entrada de string de "formato livre", e erros de análise podem ocorrer durante a construção.

Dê uma olhada nesta imagem de tela mostrando resultados filtrados para uma consulta avançada do log _logs.kubernetes.event_.  Há muita coisa acontecendo nesta página, o que é explicado abaixo da imagem:

image:Log_Advanced_Query_ScreenExplained.png["A tela de consulta avançada explicada"]

. Esta sequência de consulta avançada filtra o seguinte:
+
** Filtre por entradas de log com um _motivo_ que inclua a palavra "failed", mas nada com o motivo específico "FailedMount".
** Inclua qualquer uma dessas entradas que também incluam um _metadata.namespace_ incluindo a palavra "monitoring", mas exclua os namespaces específicos de "cm-monitoring" ou "eg-monitoring".
+
Observe que, no caso acima, como "cm-monitoring" e "eg-monitoring" contêm um hífen ("-"), as strings devem ser incluídas entre aspas duplas ou um erro de análise será exibido.  Strings que não incluem traços, espaços, etc. não precisam ser colocadas entre aspas.  Em caso de dúvida, tente colocar a string entre aspas.



. Os resultados do filtro atual, incluindo quaisquer valores "Filtrar por" E o filtro Consulta avançada, são exibidos na lista de resultados.  A lista pode ser classificada por qualquer coluna exibida.  Para exibir colunas adicionais, selecione o ícone de "engrenagem".
. O gráfico foi ampliado para mostrar apenas os resultados de log que ocorreram dentro de um período de tempo específico.  O intervalo de tempo mostrado aqui reflete o nível de zoom atual.  Selecione o botão _Redefinir Zoom_ para definir o nível de zoom de volta para o intervalo de tempo atual do Data Infrastructure Insights .
. Os resultados do gráfico foram agrupados pelo campo _source_.  O gráfico mostra os resultados em cada coluna agrupados em cores.  Passar o mouse sobre uma coluna no gráfico exibirá alguns detalhes sobre as entradas específicas.
+
image:Log_Advanced_Query_Group_Detail.png["Detalhes agrupados do hover"]





==== Filtros de refino

Você pode usar o seguinte para refinar seu filtro:

|===


| Filtro | O que ele faz 


| * (Asterisco) | permite que você pesquise tudo 


| ?  (ponto de interrogação) | permite que você pesquise um número específico de caracteres 


| OU | permite que você especifique múltiplas entidades 


| NÃO | permite que você exclua texto dos resultados da pesquisa 


| _Nenhum_ | procura por valores NULL em todos os campos 


| Não * | procura por valores NULL em campos _somente texto_ 
|===
Se você colocar uma sequência de filtro entre aspas duplas, o Insight tratará tudo entre a primeira e a última aspas como uma correspondência exata.  Quaisquer caracteres especiais ou operadores dentro das aspas serão tratados como literais.  Por exemplo, filtrar por "*" retornará resultados que são um asterisco literal; o asterisco não será tratado como um curinga neste caso.  Os operadores OR e NOT também serão tratados como strings literais quando colocados entre aspas duplas.

Você pode combinar um filtro simples com um filtro de consulta avançado; o filtro resultante é um "E" dos dois.



=== A lenda do gráfico

A _Legenda_ abaixo do gráfico também traz algumas surpresas.  Para cada resultado (com base no filtro atual) mostrado na Legenda, você tem a opção de exibir somente os resultados para aquela linha (Adicionar Filtro) ou exibir quaisquer resultados QUE NÃO sejam para aquela linha (Adicionar Filtro de Excluir).  O gráfico e a lista de entradas de log são atualizados para mostrar resultados com base na sua seleção.  Para remover essa filtragem, abra a Legenda novamente e selecione [X] para limpar o filtro baseado em Legenda.

image:Log_Advanced_Query_Legend.png["Legenda de consulta avançada mostrando \"Adicionar filtro\" para o primeiro resultado"]



== Detalhes do registro

Clicar em qualquer lugar em uma entrada de log na lista abrirá um painel de detalhes para essa entrada.  Aqui você pode explorar mais informações sobre o evento.

Clique em "Adicionar filtro" para adicionar o campo selecionado ao filtro atual.  A lista de entradas de log será atualizada com base no novo filtro.

Observe que alguns campos não podem ser adicionados como filtros; nesses casos, o ícone _Adicionar filtro_ não está disponível.

image:LogExplorer_DetailPane.png["Painel de detalhes de entrada de log"]



== Solução de problemas

Aqui você encontrará sugestões para solucionar problemas com consultas de log.

|===


| *Problema:* | *Experimente isto:* 


| Não vejo mensagens de "depuração" na minha consulta de log | As mensagens de log de depuração não são coletadas.  Para capturar as mensagens desejadas, altere a gravidade da mensagem relevante para o nível _informativo, erro, alerta, emergência_ ou _aviso_. 
|===